<!DOCTYPE html> 
<html> 
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>使用XHR</title> 
        <style> 
            .red-text { 
             color: red; 
            } 
            .green-text { 
             color: green; 
            } 
            .blue-text { 
             color: blue; 
            } 
        </style>
    </head> 
    <body>
        <script>
            // 创建xhr实例
            const xhr = new XMLHttpRequest();
            console.log(xhr);
            console.log(xhr.readyState, '未调用open方法')
            /* 
                readystatechange事件
                    readyState 属性变化时调用
            */
            xhr.addEventListener('readystatechange', (e) => {
                console.log(e, 'e');
            })
            /* 
                1、使用open方法：(为发送请求做准备)
                    参数
                        1、请求方法;
                        2、请求的url;
                        3、请求是否使用异步;
                    注意： 只能访问同源 URL，也就是域名相同、端口相同、协议相同。如果请求的 URL 与
                        发送请求的页面在任何方面有所不同，则会抛出安全错误
            */
            xhr.open("get", "/api/getList", true);
            console.log(xhr.readyState, '调用open方法')

            /* 
                abort方法: 取消异步请求
            */
        //    xhr.abort()

            /* 
                2、使用 send方法：（发送定义好的请求）  
                    参数：
                        1、请求体发送的数据；
            
            */
           xhr.send(null);
           console.log(xhr.status) //   
           console.log(xhr.responseText) // 响应返回的文本 
           console.log(xhr.responseXML) // responseXML 只能获取XML数据
            /* 
                3、readyState属性
                     0：未初始化（Uninitialized）。尚未调用 open()方法。
                     1：已打开（Open）。已调用 open()方法，尚未调用 send()方法。
                     2：已发送（Sent）。已调用 send()方法，尚未收到响应。
                     3：接收中（Receiving）。已经收到部分响应。
                     4：完成（Complete）。已经收到所有响应，可以使用了
            */
            console.log(xhr.readyState, '调用open方法，且调用send方法')
        </script>
    </body>
</html>