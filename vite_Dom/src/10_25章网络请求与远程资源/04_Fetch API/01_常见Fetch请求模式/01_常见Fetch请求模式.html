<!DOCTYPE html> 
<html> 
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>跨源资源共享</title> 
        <style> 
            .red-text { 
             color: red; 
            } 
            .green-text { 
             color: green; 
            } 
            .blue-text { 
             color: blue; 
            } 
        </style>
    </head> 
    <body>
        <input type="file" multiple>
        <script>
            // 1、发送JSON数据
/*             const payload = JSON.stringify({
                foo: 'bar',
            });
            let jsonHeaders = new Headers({
                'Content-Type': 'application/json'
            })
            fetch('bar.json', {
                method: 'GET',
                headers: jsonHeaders,
            }); */

            // 2. 在请求体中发送参数
    /*         let payload1 = 'foo=bar&baz=qux';
            let paramHeaders = new Headers({ 
                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' 
            });
            fetch('/send-me-params', { 
                method: 'POST', // 发送请求体时必须使用一种 HTTP 方法
                body: payload,
                headers: paramHeaders 
            }); */

            // 3、发送文件
/*             let imageFormData = new FormData(); 
            let imageInput = document.querySelector("input[type='file']");
            imageInput.addEventListener('change', (e) => {
                console.log(e, 'e')
                imageFormData.append('iamge', e.target.files[0]);
                fetch('/send-me-params', {
                    method: 'POST', 
                    body: imageFormData
                })
            })
            console.log(imageInput.files    , 'imageInput'); */
            
            // 支持多个文件
/*             let imageFormData = new FormData(); 
            let imageInput = document.querySelector("input[type='file'][multiple]"); 
            imageInput.addEventListener('change', (e) => {
                for (let i = 0; i < imageInput.files.length; ++i) { 
                    imageFormData.append('image', imageInput.files[i]); 
                }
                fetch('/img-upload', { 
                    method: 'POST', 
                    body: imageFormData 
                });
            }) */

            // 4. 加载Blob文件
/*             const imgEl = document.createElement('img');
            fetch('/src/assets/img/logo.jpeg')
                .then((response) => response.blob())
                .then((blob) => {
                    console.log(blob, 'blob');
                    imgEl.src = URL.createObjectURL(blob);
                    console.log(imgEl.src, 'imgEl.src')
                    document.body.appendChild(imgEl);
                }) */
            
            // 5、发送跨源请求
            fetch('//cross-origin.com', { method: 'no-cors' })
                .then((response) => console.log(response.type));
            
            // 6、中断请求
            let abortController = new AbortController(); 
            fetch('wikipedia.zip', { signal: abortController.signal }) 
            .catch(() => console.log('aborted!'));
            // 10 毫秒后中断请求
            setTimeout(() => abortController.abort(), 10); 
            // 已经中断
        </script>
    </body>
</html>